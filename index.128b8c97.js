!function(){function t(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=Array(r);e<r;e++)n[e]=t[e];return n}function r(r){return function(r){if(Array.isArray(r))return t(r)}(r)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(r)||function(r,e){if(r){if("string"==typeof r)return t(r,void 0);var n=Object.prototype.toString.call(r).slice(8,-1);if("Object"===n&&r.constructor&&(n=r.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t(r,void 0)}}(r)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var e=new/*#__PURE__*/(function(){var t;function e(t){var r=this;!function(t,r){if(!(t instanceof r))throw TypeError("Cannot call a class as a function")}(this,e),this.SIZE=4,this.score=0,this.status="playing",this.board=Array.from({length:this.SIZE},function(){return Array(r.SIZE).fill(0)})}return t=[{key:"_addRandomTile",value:function(){for(var t=[],r=0;r<this.SIZE;r++)for(var e=0;e<this.SIZE;e++)0===this.board[r][e]&&t.push({row:r,col:e});if(0!==t.length){var n=Math.floor(Math.random()*t.length),o=t[n],a=o.row,i=o.col,s=.9>Math.random()?2:4;this.board[a][i]=s}}},{key:"moveLeft",value:function(){var t=this,e=!1;this.board.forEach(function(n,o){for(var a=r(n),i=n.filter(function(t){return 0!==t}),s=0;s<i.length-1;s++)i[s]===i[s+1]&&(i[s]=i[s]+i[s+1],t.score+=i[s],i[s+1]=0,s++);for(var u=i.filter(function(t){return 0!==t});u.length<4;)u.push(0);a.some(function(t,r){return t!==u[r]})&&(e=!0),t.board[o]=u}),e&&this._addRandomTile()}},{key:"moveRight",value:function(){var t=this,e=!1;this.board.forEach(function(n,o){for(var a=r(n),i=r(n).reverse().filter(function(t){return 0!==t}),s=0;s<i.length-1;s++)i[s]===i[s+1]&&(i[s]=i[s]+i[s+1],t.score+=i[s],i[s+1]=0,s++);for(var u=i.filter(function(t){return 0!==t});u.length<4;)u.push(0);u=u.reverse(),a.some(function(t,r){return t!==u[r]})&&(e=!0),t.board[o]=u}),e&&this._addRandomTile()}},{key:"moveUp",value:function(){for(var t=this,e=!1,n=[[],[],[],[]],o=0;o<this.board.length;o++)for(var a=0;a<this.board[o].length;a++)n[a][o]=this.board[o][a];n.forEach(function(o,a){for(var i=r(o),s=o.filter(function(t){return 0!==t}),u=0;u<s.length-1;u++)s[u]===s[u+1]&&(s[u]=s[u]+s[u+1],t.score+=s[u],s[u+1]=0,u++);for(var c=s.filter(function(t){return 0!==t});c.length<4;)c.push(0);i.some(function(t,r){return t!==c[r]})&&(e=!0),n[a]=c});for(var i=0;i<4;i++)for(var s=0;s<4;s++)this.board[i][s]=n[s][i];e&&this._addRandomTile()}},{key:"moveDown",value:function(){for(var t=this,e=!1,n=[[],[],[],[]],o=0;o<this.board.length;o++)for(var a=0;a<this.board[o].length;a++)n[a][o]=this.board[o][a];n.forEach(function(o,a){for(var i=r(o),s=r(o).reverse().filter(function(t){return 0!==t}),u=0;u<s.length-1;u++)s[u]===s[u+1]&&(s[u]=s[u]+s[u+1],t.score+=s[u],s[u+1]=0,u++);for(var c=s.filter(function(t){return 0!==t});c.length<4;)c.push(0);c=c.reverse(),i.some(function(t,r){return t!==c[r]})&&(e=!0),n[a]=c});for(var i=0;i<4;i++)for(var s=0;s<4;s++)this.board[i][s]=n[s][i];e&&this._addRandomTile()}},{key:"checkLose",value:function(){for(var t=0;t<4;t++)for(var r=0;r<4;r++)if(0===this.board[t][r])return!1;for(var e=0;e<4;e++)for(var n=0;n<4;n++)if(n<3&&this.board[e][n]===this.board[e][n+1]||e<3&&this.board[e][n]===this.board[e+1][n])return!1;return this.status="lose",!0}},{key:"checkWin",value:function(){var t=!0,r=!1,e=void 0;try{for(var n,o=this.board[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){var a=n.value,i=!0,s=!1,u=void 0;try{for(var c,l=a[Symbol.iterator]();!(i=(c=l.next()).done);i=!0){var f=c.value;if(2048===f){this.status="win",document.querySelector(".message-win").classList.remove("hidden");return}}}catch(t){s=!0,u=t}finally{try{i||null==l.return||l.return()}finally{if(s)throw u}}}}catch(t){r=!0,e=t}finally{try{t||null==o.return||o.return()}finally{if(r)throw e}}}},{key:"getScore",value:function(){return this.score}},{key:"updateScore",value:function(){document.querySelector(".game-score").textContent=this.score}},{key:"getState",value:function(){return this.board.map(function(t){return r(t)})}},{key:"getStatus",value:function(){return this.status}},{key:"start",value:function(){var t=this;this.score=0,this.status="playing",this.board=Array.from({length:this.SIZE},function(){return Array(t.SIZE).fill(0)}),this._addRandomTile(),this._addRandomTile();var r=document.querySelector(".start"),e=document.querySelector(".message-start");r.classList.remove("start"),r.classList.add("restart"),r.textContent="Restart",e.classList.add("hidden")}},{key:"restart",value:function(){var t=this;this.score=0,this.status="playing",this.board=Array.from({length:this.SIZE},function(){return Array(t.SIZE).fill(0)});var r=document.querySelector(".restart"),e=document.querySelector(".message-start"),n=document.querySelector(".message-lose"),o=document.querySelector(".message-win");n.classList.add("hidden"),e.classList.remove("hidden"),o.classList.add("hidden"),r.classList.add("start"),r.classList.remove("restart"),r.textContent="Start"}}],function(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}(e.prototype,t),e}()),n=document.querySelector(".button.start");function o(){for(var t=document.querySelectorAll(".field-cell"),r=0;r<4;r++)for(var n=0;n<4;n++){var o=4*r+n,a=e.board[r][n],i=t[o];i.textContent=0===a?"":a,i.className="field-cell",0!==a&&i.classList.add("field-cell--".concat(a))}}function a(){e.checkLose()&&document.querySelector(".message-lose").classList.remove("hidden")}function i(){e.checkWin()&&document.querySelector(".message-win").classList.remove("hidden")}n.addEventListener("click",function(){n.classList.contains("restart")?e.restart():e.start(),o(),e.updateScore()}),document.addEventListener("keydown",function(t){"ArrowLeft"===t.key&&(e.moveLeft(),o(),e.updateScore(),a(),i()),"ArrowRight"===t.key&&(e.moveRight(),o(),e.updateScore(),a(),i()),"ArrowUp"===t.key&&(e.moveUp(),o(),e.updateScore(),a(),i()),"ArrowDown"===t.key&&(e.moveDown(),o(),e.updateScore(),a(),i())})}();
//# sourceMappingURL=index.128b8c97.js.map
